# Networked White Elephant
Final project for CSCI5332

Concept

For this final project, we decided to create a networked game. We implemented the White Elephant game, also known as Bad Santa or Dirty Santa. This is a variation on Secret Santa. We implemented the game according to the following rules: 
1.	Each player brings one wrapped gift to a common pool. 
2.	For the game's first turn, the first player selects a gift from the pool and opens it. 
3.	Each following turn, the next player will either open a gift from the pool or steal a gift that another player has previously opened from its current owner. 
4.	If a gift is stolen, the player whom it was stolen from will open a gift from the pool or steal a gift from another player. They cannot steal back the gift that was stolen from them. 
5.	If a gift has been stolen three times in a row, the last player whose gift was stolen must choose a gift from the pool. They cannot steal a gift.  
6.	Once all players have a gift, the game ends.

Implementation

Our game is implemented in Java using Socket programming. We began by using an assignment from CSCI 5332 which made use of Java Sockets to make calls to an API as an example of how Sockets can be used to pass information between a client and a server. Because this project is much larger than the assignment from class, it consists of five Java classes: Player, Client, Server, Handler, and Game. <br/>
The simplest of the five classes is the Player class. It is an Object class that allows each user’s name and the gift currently in their possession to be tracked. <br/>
The Client class is the program that will be run by an individual user. It communicates with the server via a socket connection on localhost port 5332. While the game is in progress, the Client class continuously reads text sent by the server and, when appropriate, accepts text input from the user’s keyboard and sends it to the server. <br/>
The Server class is the program that will be run on the server machine. It accepts connections from clients, connects each client to an instance of the Handler class, and runs that instance of the Handler class. These instances are added to an ArrayList of clients which is used within a utility method sendMessage() which allows messages to be sent to all clients at once. Currently, four clients are required to play the game, however, this quantity can be easily changed by changing the value of the totalPlayers variable within the Server class to allow for any number of players to be required. <br/>
The Handler class extends the Java Thread class. This allows multiple instances of Handler to run simultaneously. An instance of the Handler class creates an instance of the Player class to track the associated user’s name and gift they currently possess. While less than four clients are connected to the server, the handler will output a ‘waiting’ message to the client every five seconds. Once four clients have connected, the Handler class will run the Game class’s takeTurn() method while the game progresses.<br/>
The Game class contains the methods used to play the game. The login() method welcomes the player to the game and accepts input from the user for the player’s name and the gift that they wish to contribute to the gift pool. A player object is created using this name and is added to the ArrayList of players and the name itself is added to a secondary ArrayList that is used to prevent users from using the same name to avoid confusion. Gifts are added to another ArrayList that acts as the gift pool. A synchronized method called takeTurn() checks if the game is running, then gives the user the choice of choosing or stealing a gift. If the current turn is the first turn, if three ‘steal’s have already occurred, or if there are no players who can be stolen from, only the ‘choose’ option is provided to the user. The chooseGift() and stealGift() methods provide functionality for the ‘choose’ and ‘steal’ options. The checkGameOver() method checks if all players have a gift. If so, the game is over and the final results are printed using the printGifts() method. The checkStealableGifts() method checks if there are any players from whom a gift may be stolen and the printStealableGifts() method prints what users may be stolen from and the gifts currently in their possession. 
